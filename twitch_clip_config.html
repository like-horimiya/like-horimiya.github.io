<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch Clip Player - URLè¨­å®šãƒ„ãƒ¼ãƒ«</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #6441a5;
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .twitch-logo {
            width: 40px;
            height: 40px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .required {
            color: #e74c3c;
            font-size: 12px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
            background: white;
        }

        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus {
            outline: none;
            border-color: #6441a5;
        }

        select {
            cursor: pointer;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #6441a5;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #6441a5;
            color: white;
        }

        .btn-primary:hover {
            background: #7c52c4;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(100, 65, 165, 0.3);
        }

        .btn-secondary {
            background: #9147ff;
            color: white;
        }

        .btn-secondary:hover {
            background: #a55efc;
        }

        .btn-success {
            background: #2ecc71;
            color: white;
        }

        .btn-success:hover {
            background: #27ae60;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 13px;
            color: #1976d2;
        }

        .success-box {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 13px;
            color: #2e7d32;
        }

        .error-box {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 12px;
            margin: 15px 0;
            border-radius: 4px;
            font-size: 13px;
            color: #c62828;
        }

        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 3px solid rgba(100, 65, 165, 0.3);
            border-radius: 50%;
            border-top-color: #6441a5;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .url-output {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 6px;
            border: 2px solid #ddd;
            word-break: break-all;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #333;
            margin-top: 10px;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
        }

        .url-output.empty {
            color: #999;
            font-style: italic;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .link {
            color: #6441a5;
            text-decoration: none;
            font-weight: 600;
        }

        .link:hover {
            text-decoration: underline;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 600px) {
            .grid-2 {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 20px;
            }
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            background: #6441a5;
            color: white;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
        }

        .input-with-button {
            display: flex;
            gap: 10px;
        }

        .input-with-button input {
            flex: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            <svg class="twitch-logo" viewBox="0 0 2400 2800" xmlns="http://www.w3.org/2000/svg">
                <path fill="#6441a5" d="M500 0L0 500v1800h600v500l500-500h400l900-900V0H500zm1700 1300l-400 400h-400l-350 350v-350H600V200h1600v1100z"/>
                <path fill="#6441a5" d="M1700 550h200v600h-200V550zm-550 0h200v600h-200V550z"/>
            </svg>
            Twitch Clip Player è¨­å®šãƒ„ãƒ¼ãƒ«
        </h1>
        <p class="subtitle">4ã‚¹ãƒ†ãƒƒãƒ—ã§OBSç”¨ã®URLã‚’ç°¡å˜ã«ç”Ÿæˆã§ãã¾ã™</p>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—1: OAuth Tokenå–å¾— -->
        <div class="section">
            <div class="section-title">
                ğŸ“ ã‚¹ãƒ†ãƒƒãƒ—1: OAuth Tokenã‚’å–å¾—
                <span class="required">å¿…é ˆ</span>
            </div>
            
            <div class="info-box">
                <strong>Token Generator ã‚’ä½¿ç”¨ã—ã¦Tokenã‚’å–å¾—ã—ã¦ãã ã•ã„</strong><br>
                1. ä»¥ä¸‹ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯<br>
                2. ã€ŒCustom Scope Tokenã€ã‚’é¸æŠ<br>
                3. ã‚¹ã‚³ãƒ¼ãƒ—ã§ã€Œuser:read:broadcastã€ã‚’ãƒã‚§ãƒƒã‚¯<br>
                4. ç”Ÿæˆã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ”ãƒ¼
            </div>

            <div class="error-box">
                âš ï¸ <strong>é‡è¦:</strong> ã‚³ãƒãƒ³ãƒ‰ã§ã‚¯ãƒªãƒƒãƒ—ãŒå†ç”Ÿã•ã‚Œãªããªã£ãŸã‚‰ã€ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å†ç”Ÿæˆã—ã¦æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®šã—ã¦ãã ã•ã„
            </div>

            <div style="text-align: center; margin: 15px 0;">
                <a href="https://twitchtokengenerator.com/" target="_blank" class="btn btn-primary">
                    ğŸ”‘ Twitch Token Generator ã‚’é–‹ã
                </a>
            </div>

            <div class="form-group">
                <label for="token">
                    Access Token
                    <span class="badge">å¿…é ˆ</span>
                </label>
                <input 
                    type="text" 
                    id="token" 
                    placeholder="ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ (oauth:ã¯ä¸è¦)"
                    oninput="updateURL()"
                >
                <div class="help-text">Token Generatorã§ç”Ÿæˆã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„</div>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—2: ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ± -->
        <div class="section">
            <div class="section-title">
                ğŸ‘¤ ã‚¹ãƒ†ãƒƒãƒ—2: ãƒãƒ£ãƒ³ãƒãƒ«æƒ…å ±
                <span class="required">å¿…é ˆ</span>
            </div>

            <div class="form-group">
                <label for="channel">
                    ãƒãƒ£ãƒ³ãƒãƒ«å
                    <span class="badge">å¿…é ˆ</span>
                </label>
                <div class="input-with-button">
                    <input 
                        type="text" 
                        id="channel" 
                        placeholder="ä¾‹: like_horimiya"
                        oninput="updateURL()"
                    >
                    <button class="btn btn-secondary" onclick="getBroadcasterID()" id="fetchBtn">
                        Broadcaster IDå–å¾—
                    </button>
                </div>
                <div class="help-text">å°æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„</div>
            </div>

            <div class="form-group">
                <label for="broadcaster_id">
                    Broadcaster ID
                    <span class="badge">å¿…é ˆ</span>
                </label>
                <input 
                    type="text" 
                    id="broadcaster_id" 
                    placeholder="ä¸Šã®ãƒœã‚¿ãƒ³ã§è‡ªå‹•å–å¾—ã•ã‚Œã¾ã™"
                    readonly
                    style="background: #f0f0f0;"
                >
                <div id="broadcaster-status"></div>
            </div>
        </div>

        <!-- ã‚¹ãƒ†ãƒƒãƒ—3: è©³ç´°è¨­å®š -->
        <div class="section">
            <div class="section-title">
                âš™ï¸ ã‚¹ãƒ†ãƒƒãƒ—3: è©³ç´°è¨­å®š
                <span style="color: #666; font-size: 12px; font-weight: normal;">(ã‚ªãƒ—ã‚·ãƒ§ãƒ³)</span>
            </div>

            <div class="grid-2">
                <div class="form-group">
                    <label for="trigger">ãƒˆãƒªã‚¬ãƒ¼ã‚³ãƒãƒ³ãƒ‰</label>
                    <input 
                        type="text" 
                        id="trigger" 
                        value="!clip"
                        placeholder="ä¾‹: !clip"
                        oninput="updateURL()"
                    >
                    <div class="help-text">ãƒãƒ£ãƒƒãƒˆã§å…¥åŠ›ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰</div>
                </div>

                <div class="form-group">
                    <label for="days">ã‚¯ãƒªãƒƒãƒ—å–å¾—æœŸé–“</label>
                    <select id="days" onchange="updateURL()">
                        <option value="1">24æ™‚é–“</option>
                        <option value="7">7æ—¥</option>
                        <option value="30" selected>30æ—¥</option>
                        <option value="all">ã™ã¹ã¦ï¼ˆæ—¥ä»˜æŒ‡å®šãªã—ï¼‰</option>
                    </select>
                    <div class="help-text">ã€Œã™ã¹ã¦ã€ã¯æ—¥ä»˜ç¯„å›²ã‚’æŒ‡å®šã›ãšã€æœ€æ–°ã‹ã‚‰å…¨ã‚¯ãƒªãƒƒãƒ—ã‚’å–å¾—</div>
                </div>
            </div>

            <div class="grid-2">
                <div class="form-group">
                    <div class="checkbox-group">
                        <input 
                            type="checkbox" 
                            id="featured"
                            onchange="updateURL()"
                        >
                        <label for="featured" style="margin: 0;">æ³¨ç›®ã‚¯ãƒªãƒƒãƒ—ã®ã¿ä½¿ç”¨</label>
                    </div>
                    <div class="help-text">ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã¨æ³¨ç›®ã‚¯ãƒªãƒƒãƒ—ã®ã¿ãŒå†ç”Ÿã•ã‚Œã¾ã™</div>
                </div>

                <div class="form-group">
                    <div class="checkbox-group">
                        <input 
                            type="checkbox" 
                            id="debug"
                            onchange="updateURL()"
                        >
                        <label for="debug" style="margin: 0;">ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰</label>
                    </div>
                    <div class="help-text">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚’æœ‰åŠ¹ã«ã—ã¾ã™</div>
                </div>
            </div>
        </div>

        <!-- ç”Ÿæˆã•ã‚ŒãŸURL -->
        <div class="section">
            <div class="section-title">
                ğŸ¯ ã‚¹ãƒ†ãƒƒãƒ—4: å®Œæˆã—ãŸURL
            </div>

            <div class="url-output empty" id="output-url">
                å¿…è¦ãªæƒ…å ±ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ã“ã“ã«URLãŒè¡¨ç¤ºã•ã‚Œã¾ã™
            </div>

            <div class="button-group" style="margin-top: 15px;">
                <button class="btn btn-success" onclick="copyToClipboard()" id="copyBtn" disabled>
                    ğŸ“‹ URLã‚’ã‚³ãƒ”ãƒ¼
                </button>
                <button class="btn btn-secondary" onclick="testURL()" id="testBtn" disabled>
                    ğŸ” æ–°ã—ã„ã‚¿ãƒ–ã§é–‹ã
                </button>
            </div>

            <div id="copy-status"></div>
        </div>

        <!-- ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ -->
        <div class="section">
            <div class="section-title">
                ğŸ“– OBSã§ã®ä½¿ã„æ–¹
            </div>

            <ol style="line-height: 1.8; color: #333;">
                <li>ä¸Šè¨˜ã®URLã‚’ã‚³ãƒ”ãƒ¼</li>
                <li>OBSã‚’é–‹ã</li>
                <li>ã‚½ãƒ¼ã‚¹ â†’ è¿½åŠ  (+) â†’ ãƒ–ãƒ©ã‚¦ã‚¶</li>
                <li>åå‰ã‚’å…¥åŠ›ï¼ˆä¾‹: "Twitch Clip Player"ï¼‰</li>
                <li>URLã‚’ãƒšãƒ¼ã‚¹ãƒˆ</li>
                <li>å¹…640ã€é«˜ã•360ç­‰ã€<strong>16:9ã«ãªã‚‹ã‚ˆã†ã«</strong>è¨­å®š</li>
                <li><strong>ã€Œãƒšãƒ¼ã‚¸ã¨å¯¾è©±ã€ã®ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã™</strong> â­é‡è¦</li>
                <li><strong>ã€Œãƒšãƒ¼ã‚¸ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã¨ãã«ãƒ–ãƒ©ã‚¦ã‚¶ã‚’æ›´æ–°ã€ã«ãƒã‚§ãƒƒã‚¯</strong></li>
                <li>OK ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
            </ol>

            <div class="error-box" style="margin-top: 15px;">
                âœ… <strong>Twitchã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤å¯¾ç­–æ¸ˆã¿ï¼</strong><br>
                ã“ã®ãƒ„ãƒ¼ãƒ«ã§ç”Ÿæˆã•ã‚Œã‚‹URLã«ã¯ã€ä»¥ä¸‹ã®å¯¾ç­–ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼š<br><br>
                1. <strong>controls=falseãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</strong>ã§ã‚·ãƒ¼ã‚¯ãƒãƒ¼ã‚„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’éè¡¨ç¤º<br>
                2. <strong>pointer-events: none</strong>ã§ãƒã‚¦ã‚¹æ“ä½œã‚’ç„¡åŠ¹åŒ–<br>
                3. <strong>ã€Œãƒšãƒ¼ã‚¸ã¨å¯¾è©±ã€ã‚’OFF</strong>ã§ã•ã‚‰ã«å®‰å®š<br><br>
                ã“ã‚Œã‚‰ã®å¯¾ç­–ã«ã‚ˆã‚Šã€ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¯**ã»ã¼å®Œå…¨ã«éè¡¨ç¤º**ã«ãªã‚Šã¾ã™ï¼
            </div>

            <div class="info-box" style="margin-top: 15px;">
                ğŸ’¡ <strong>ãƒãƒ£ãƒƒãƒˆã‚³ãƒãƒ³ãƒ‰</strong><br><br>
                â€¢ <strong>!clip</strong> - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’å†ç”Ÿï¼ˆã‚·ãƒ£ãƒƒãƒ•ãƒ«å†ç”Ÿï¼‰<br>
                â†’ èª°ã§ã‚‚ä½¿ç”¨å¯èƒ½<br><br>
                
                <strong>ğŸ¯ å‹•çš„ãƒãƒ£ãƒ³ãƒãƒ«æŒ‡å®šï¼ˆãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼ä»¥ä¸Šã®ã¿ï¼‰ï¼š</strong><br>
                â€¢ <strong>!clip ai_chai</strong> - ai_chaiãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’ãƒ©ãƒ³ãƒ€ãƒ å†ç”Ÿ<br>
                â€¢ <strong>!clip shroud</strong> - shroudãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’ãƒ©ãƒ³ãƒ€ãƒ å†ç”Ÿ<br>
                â€¢ <strong>!clip ä»»æ„ã®ãƒãƒ£ãƒ³ãƒãƒ«å</strong> - ãã®ãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’å†ç”Ÿ<br><br>
                âš ï¸ ã“ã®æ©Ÿèƒ½ã¯é…ä¿¡è€…æœ¬äººã¾ãŸã¯ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼ã®ã¿ãŒä½¿ç”¨ã§ãã¾ã™<br>
                
                è¦–è´è€…ãŒå¥½ããªãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’æ¥½ã—ã‚ã¾ã™!
            </div>

            <div class="info-box" style="margin-top: 10px;">
                ğŸ“Œ <strong>ãƒ™ãƒ¼ã‚¹URL:</strong> https://like-horimiya.github.io/twitch-clip-player.html<br>
                ã“ã®URLã«è‡ªå‹•çš„ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¿½åŠ ã•ã‚Œã¾ã™
            </div>
        </div>

        <!-- å‹•çš„ãƒãƒ£ãƒ³ãƒãƒ«æŒ‡å®šæ©Ÿèƒ½ -->
        <div class="section">
            <div class="section-title">
                ğŸ¯ å‹•çš„ãƒãƒ£ãƒ³ãƒãƒ«æŒ‡å®šæ©Ÿèƒ½
            </div>

            <div class="info-box">
                <strong>ğŸ“– ä½¿ã„æ–¹</strong><br><br>
                
                <strong>1. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’å†ç”Ÿï¼š</strong><br>
                ãƒãƒ£ãƒƒãƒˆã§ <strong>!clip</strong> ã¨å…¥åŠ›<br>
                â†’ è¨­å®šã—ãŸãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«å†ç”Ÿï¼ˆé‡è¤‡ãªã—ï¼‰<br><br>
                
                <strong>2. æŒ‡å®šãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’å†ç”Ÿï¼š</strong><br>
                ãƒãƒ£ãƒƒãƒˆã§ <strong>!clip ãƒãƒ£ãƒ³ãƒãƒ«å</strong> ã¨å…¥åŠ›<br><br>
                
                ä¾‹ï¼š<br>
                â€¢ <strong>!clip ai_chai</strong> â†’ ai_chaiã®ã‚¯ãƒªãƒƒãƒ—ã‚’ãƒ©ãƒ³ãƒ€ãƒ å†ç”Ÿ<br>
                â€¢ <strong>!clip shroud</strong> â†’ shroudã®ã‚¯ãƒªãƒƒãƒ—ã‚’ãƒ©ãƒ³ãƒ€ãƒ å†ç”Ÿ<br>
                â€¢ <strong>!clip xqc</strong> â†’ xqcã®ã‚¯ãƒªãƒƒãƒ—ã‚’ãƒ©ãƒ³ãƒ€ãƒ å†ç”Ÿ<br><br>
            </div>

            <div class="error-box" style="margin-top: 15px;">
                âš ï¸ <strong>æ¨©é™åˆ¶é™ã«ã¤ã„ã¦</strong><br><br>
                å‹•çš„ãƒãƒ£ãƒ³ãƒãƒ«æŒ‡å®šæ©Ÿèƒ½ï¼ˆ!clip ãƒãƒ£ãƒ³ãƒãƒ«åï¼‰ã¯ã€<strong>ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼ä»¥ä¸Šã®æ¨©é™ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿</strong>ãŒä½¿ç”¨ã§ãã¾ã™ã€‚<br><br>
                <strong>ä½¿ç”¨å¯èƒ½ï¼š</strong><br>
                â€¢ é…ä¿¡è€…æœ¬äººï¼ˆãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ã‚¿ãƒ¼ï¼‰<br>
                â€¢ ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼<br><br>
                <strong>ä½¿ç”¨ä¸å¯ï¼š</strong><br>
                â€¢ ä¸€èˆ¬è¦–è´è€…<br>
                â€¢ VIPï¼ˆãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚¿ãƒ¼æ¨©é™ãŒãªã„å ´åˆï¼‰<br>
            </div>

            <div class="info-box" style="margin-top: 15px;">
                <strong>ğŸ’¡ å‹•ä½œã®é•ã„</strong><br><br>
                
                <strong>!clipï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ï¼š</strong><br>
                â€¢ èµ·å‹•æ™‚ã«å…¨ã‚¯ãƒªãƒƒãƒ—ã‚’å–å¾—æ¸ˆã¿<br>
                â€¢ ã‚·ãƒ£ãƒƒãƒ•ãƒ«å†ç”Ÿï¼ˆå…¨ã‚¯ãƒªãƒƒãƒ—ã‚’1å›ãšã¤å†ç”Ÿï¼‰<br>
                â€¢ å…¨ã¦å†ç”Ÿã—ãŸã‚‰è‡ªå‹•ã§å†ã‚·ãƒ£ãƒƒãƒ•ãƒ«<br>
                â€¢ å³åº§ã«å†ç”Ÿé–‹å§‹<br><br>
                
                <strong>!clip ãƒãƒ£ãƒ³ãƒãƒ«åï¼š</strong><br>
                â€¢ ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«APIã§å–å¾—<br>
                â€¢ å®Œå…¨ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ<br>
                â€¢ æœ€å¤§100ä»¶ã®ã‚¯ãƒªãƒƒãƒ—ã‹ã‚‰é¸æŠ<br>
                â€¢ 1-2ç§’ã®å–å¾—æ™‚é–“<br>
            </div>

            <div class="success-box" style="margin-top: 15px;">
                <strong>âœ¨ å®Ÿç”¨ä¾‹</strong><br><br>
                
                â€¢ ã‚³ãƒ©ãƒœé…ä¿¡ã§ç›¸æ‰‹ã®ãƒãƒ£ãƒ³ãƒãƒ«ã®ã‚¯ãƒªãƒƒãƒ—ã‚’ç´¹ä»‹<br>
                â€¢ è¦–è´è€…ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿œãˆã‚‹<br>
                â€¢ é¢ç™½ã„ã‚¯ãƒªãƒƒãƒ‘ãƒ¼ã®ã‚¯ãƒªãƒƒãƒ—ã‚’å…±æœ‰<br>
                â€¢ äººæ°—é…ä¿¡è€…ã®ã‚¯ãƒªãƒƒãƒ—ã‚’é…ä¿¡ä¸­ã«æµã™<br>
            </div>
        </div>
    </div>

    <script>
        // Twitch API Client IDï¼ˆå…¬é–‹æƒ…å ±ï¼‰
        const CLIENT_ID = 'gp762nuuoqcoxypju8c569th9wz7q5';

        // Broadcaster IDã‚’å–å¾—
        async function getBroadcasterID() {
            const channel = document.getElementById('channel').value.trim().toLowerCase();
            const token = document.getElementById('token').value.trim();
            const statusDiv = document.getElementById('broadcaster-status');
            const fetchBtn = document.getElementById('fetchBtn');

            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            if (!channel) {
                statusDiv.innerHTML = '<div class="error-box">ãƒãƒ£ãƒ³ãƒãƒ«åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</div>';
                return;
            }

            if (!token) {
                statusDiv.innerHTML = '<div class="error-box">å…ˆã«OAuth Tokenã‚’å–å¾—ãƒ»å…¥åŠ›ã—ã¦ãã ã•ã„</div>';
                return;
            }

            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            fetchBtn.disabled = true;
            fetchBtn.innerHTML = '<span class="spinner"></span> å–å¾—ä¸­...';
            statusDiv.innerHTML = '<div class="info-box"><span class="spinner"></span> Broadcaster IDã‚’å–å¾—ã—ã¦ã„ã¾ã™...</div>';

            try {
                const response = await fetch(`https://api.twitch.tv/helix/users?login=${channel}`, {
                    headers: {
                        'Client-ID': CLIENT_ID,
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (!response.ok) {
                    throw new Error(`API Error: ${response.status}`);
                }

                const data = await response.json();

                if (data.data && data.data.length > 0) {
                    const broadcasterId = data.data[0].id;
                    const displayName = data.data[0].display_name;
                    
                    document.getElementById('broadcaster_id').value = broadcasterId;
                    statusDiv.innerHTML = `<div class="success-box">âœ… å–å¾—æˆåŠŸï¼ ãƒãƒ£ãƒ³ãƒãƒ«: ${displayName} (ID: ${broadcasterId})</div>`;
                    
                    // URLã‚’æ›´æ–°
                    updateURL();
                } else {
                    statusDiv.innerHTML = '<div class="error-box">ãƒãƒ£ãƒ³ãƒãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãƒãƒ£ãƒ³ãƒãƒ«åã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</div>';
                }
            } catch (error) {
                console.error('Error:', error);
                statusDiv.innerHTML = `<div class="error-box">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${error.message}<br>ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚</div>`;
            } finally {
                fetchBtn.disabled = false;
                fetchBtn.innerHTML = 'Broadcaster IDå–å¾—';
            }
        }

        // URLã‚’æ›´æ–°
        function updateURL() {
            // ãƒ™ãƒ¼ã‚¹URLã¯å›ºå®š
            const baseUrl = 'https://like-horimiya.github.io/twitch-clip-player.html';
            
            const channel = document.getElementById('channel').value.trim().toLowerCase();
            const broadcasterId = document.getElementById('broadcaster_id').value.trim();
            const token = document.getElementById('token').value.trim();
            const trigger = document.getElementById('trigger').value.trim() || '!clip';
            const daysSelect = document.getElementById('days').value;
            const featured = document.getElementById('featured').checked;
            const debug = document.getElementById('debug').checked;

            const outputDiv = document.getElementById('output-url');
            const copyBtn = document.getElementById('copyBtn');
            const testBtn = document.getElementById('testBtn');

            // å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯
            if (!channel || !broadcasterId || !token) {
                outputDiv.textContent = 'å¿…è¦ãªæƒ…å ±ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€ã“ã“ã«URLãŒè¡¨ç¤ºã•ã‚Œã¾ã™';
                outputDiv.classList.add('empty');
                copyBtn.disabled = true;
                testBtn.disabled = true;
                return;
            }

            // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ§‹ç¯‰
            const params = new URLSearchParams({
                channel: channel,
                broadcaster_id: broadcasterId,
                token: token,
                trigger: trigger
            });

            // ã€Œã™ã¹ã¦ã€ä»¥å¤–ã®å ´åˆã®ã¿daysãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
            if (daysSelect !== 'all') {
                params.append('days', daysSelect);
            }

            if (featured) {
                params.append('featured', 'true');
            }

            if (debug) {
                params.append('debug', 'true');
            }

            // å®Œæˆã—ãŸURL
            const finalUrl = `${baseUrl}?${params.toString()}`;

            outputDiv.textContent = finalUrl;
            outputDiv.classList.remove('empty');
            copyBtn.disabled = false;
            testBtn.disabled = false;
        }

        // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼
        function copyToClipboard() {
            const url = document.getElementById('output-url').textContent;
            const statusDiv = document.getElementById('copy-status');

            navigator.clipboard.writeText(url).then(() => {
                statusDiv.innerHTML = '<div class="success-box">âœ… URLã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</div>';
                
                // 3ç§’å¾Œã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¶ˆã™
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 3000);
            }).catch(err => {
                statusDiv.innerHTML = '<div class="error-box">ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ã‚³ãƒ”ãƒ¼ã—ã¦ãã ã•ã„ã€‚</div>';
                console.error('Copy error:', err);
            });
        }

        // æ–°ã—ã„ã‚¿ãƒ–ã§ãƒ†ã‚¹ãƒˆ
        function testURL() {
            const url = document.getElementById('output-url').textContent;
            window.open(url, '_blank');
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸURLã‚’æ›´æ–°
        window.addEventListener('load', () => {
            updateURL();
        });
    </script>
</body>
</html>